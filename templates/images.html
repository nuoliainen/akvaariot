{% extends "layout.html" %}

{% block title %}Akvaarion kuvat{% endblock %}

{% block content %}
<h2>Akvaarion <i>{{ aquarium.name }}</i> kuvat</h2>

<p>
  Kuvia: {{ image_count }}/6 kpl
</p>

{% if images %}
  <form action="/remove_images" method="post">
    <div class="aquarium-images">
      {% for image in images %}
        <div class="image-row">
          <input type="checkbox" name="image_id" value="{{ image.id }}" />
          <div class="image-wrapper">
            <img class="aquarium-image{% if main_image == image.id %} main-image{% endif %}"
              src="/image/{{ image.id }}"
              alt="Akvaarion kuva" />
            {% if main_image == image.id %}
              <div class="image-overlay-text">Pääkuva</div>
            {% endif %}
          </div>
        </div>
      {% endfor %}
    </div>
    <p>
      <input type="hidden" name="csrf_token" value="{{ session.csrf_token }}" />
      <input type="hidden" name="aquarium_id" value="{{ aquarium.id }}" />
      <input type="submit" value="Poista valitut" />
    </p>
  </form>
  <a href="/remove_all_images/{{ aquarium.id }}">Poista kaikki kuvat</a>
  {% endif %}

  {% if image_count < 6 %}
    <h3>Lisää uusi kuva</h3>
    <p>
      <i>Vaadittu tiedostomuoto .png ja maksimikoko 100MB</i>
    </p>
    <form action="/add_image" method="post" enctype="multipart/form-data">
      <p>
        <label for="image">Kuva</label>:
        <input type="file" id="image" name="image" accept=".png" />
      </p>
      <input type="hidden" name="csrf_token" value="{{ session.csrf_token }}" />
      <input type="hidden" name="aquarium_id" value="{{ aquarium.id }}" />
      <input type="submit" value="Lähetä" />
    </form>
  {% else %}
    <p>Olet jo lisännyt maksimimäärän kuvia.</p>
  {% endif %}

  <p>
    <a href="/aquarium/{{ aquarium.id }}">Takaisin</a>
  </p>
{% endblock %}
